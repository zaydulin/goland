# Список задач в рамках проекта

"Страница авторизации"
* Форма
  * Поле: Login
  * Поле: Password
  * Поле: E-Mail
  * Поле: Number phone
* Структура 
  * Подключение шаблона
    * Текущий шаблон
    * Переход на страницу(регистрации)
    * Переход на страницу(сбросить пароль)
  * Вывод формы
  * POST-запрос к базе данных
  * Valid: редирект на страницу профиля
  * Invalid: message -> ERROR(filed)
    * При неверном вводе конкретного поля Логин -> (GET-запрос) -> ERROR message(Неверный логин)
    * При неверном вводе конкретного поля Пароль -> (GET-запрос) -> ERROR message(Неверный пароль)
    * При неверном вводе конкретного поля E-Mail -> (GET-запрос) -> ERROR message(Неверный E-Mail)
    * При неверном вводе конкретного поля Номер телефона -> (GET-запрос) -> ERROR message(Неверный Номер телефона)
* База данных(User)
  * ID
  * Login
  * Password
  * E-Mail
  * Number phone

"Страница профиля"
* Форма
  * Поле: Login
  * Поле: NickName
  * Поле: E-Mail
  * Поле: Номер телефона
  * Поле: Firstname
  * Поле: Lastname
  * Поле: Отчество
  * Поле: Date
  * Поле: Avatar
  * Поле: Gender
  * Поле: City
  * Поле: Address
* Структура
  * Подключение шаблона
    * Текущий шаблон
    * Переход на страницу(выход)
    * Переход на страницу(безопасность)
  * Вывод формы
  * POST-запрос к базе данных
  * Valid: редирект на страницу профиля
  * Invalid: message -> ERROR(filed)
    * При неверном вводе конкретного поля Логин -> (GET-запрос) -> ERROR message(Неверный логин)
    * При неверном вводе конкретного поля E-Mail -> (GET-запрос) -> ERROR message(Неверный E-Mail)
    * При неверном вводе конкретного поля Номер телефона -> (GET-запрос) -> ERROR message(Неверный Номер телефона)
* База данных(User)
  * ID
  * Login
  * Password
  * E-Mail
  * Number phone
  * FirstName
  * LastName
  * Отчество
  * Date
  * Avatar
  * Gender
  * City
  * Address


"Страница регистрации"
* Форма
  * Поле: Login
  * Поле: FirstName
  * Поле: LastName
  * Поле: Отчество
  * Поле: E-Mail
  * Поле: Date
  * Поле: Gender
  * Поле: Number phone
  * Поле: Password
  * Поле: Password2
* Структура
  * Подключение шаблона
    * Текущий шаблон
    * Переход на страницу(авторизация)
    * Переход на страницу(сбросить пароль)
  * Вывод формы
  * POST-запрос к базе данных
  * Valid: редирект на страницу профиля
  * Invalid: message -> ERROR(filed)
    * При существующем поле Логина -> (GET-запрос) -> ERROR message(Данный логин зарегистрирован)
    * При существующем поле E-Mail -> (GET-запрос) -> ERROR message(Данный E-Mail зарегистрирован)
    * При существующем поле Number phone -> (GET-запрос) -> ERROR message(Данный номер телефона зарегистрирован)
    * При несовпадении паролей -> (JS проверка на странице) -> ERROR message(Введённые пароли не совпадают)
* База данных
  * ID
  * Login
  * Password
  * E-Mail
  * FirstName
  * LastName
  * Отчество
  * Date
  * Gender
  * Number phone


"Страница безопасности"
* Форма 1: Смена E-Mail
  * Поле: Текущий E-Mail
  * Поле: Новый E-Mail
  * Поле: Код подтверждения
* Форма 2: Смена Номера телефона
  * Поле: Текущий номер телефона
  * Поле: Новый номер телефона
  * Поле: Код подтверждения
* Форма 3: Смена пароля
  * Поле: Текущий пароль(password)
  * Поле: Новый пароль(new_password)
  * Поле: Подтверждение нового пароля(confirmation_new_password)
* Структура
  * Подключение шаблона
    * Текущий шаблон
    * Переход на страницу(профиль)
    * Переход на страницу(сбросить пароль)
  * Вывод формы смены e-mail:
    * POST-запрос к базе данных
    * Valid: 
      * Проверка почты(привязанная к этому профилю)
      * Генерация токена(временный) -> (GET-запрос через middleware)
      * Отправка ссылки с уникальным токеном через SMTP
      * Редирект на страницу безопасности
    * Invalid: message -> ERROR(filed)
      * При вводе нового E-Mail -> (GET-запрос) -> ERROR message(Данный E-Mail зарегистрирован)
      * При вводе не привязанного E-Mail к текущему пользователю -> (GET-запрос) -> ERROR message(Введён неверный e-mail)
      * При вводе неверного кода подтверждения -> (GET-запрос к middleware) -> ERROR message(Введён неверный код подтверждения)
      * Если истекло время токена -> (GET-запрос к middleware) -> ERROR message(Время действия кода истекло)
        * GET-запрос на запрос нового кода
  * Вывод формы смены номера телефона:
    * POST-запрос к базе данных
    * Valid:
      * Проверка номера телефона(привязанного к этому профилю)
      * GET-запрос на генерацию кода(интеграция)
      * Отправка SMS-кода через сервис(интеграция)
      * Редирект на страницу безопасности
    * Invalid: message -> ERROR(filed)
      * При вводе нового номера телефона -> (GET-запрос) -> ERROR message(Данный номер телефона зарегистрирован)
      * При вводе не привязанного телефона к текущему пользователю -> (GET-запрос) -> ERROR message(Введён неверный номер телефона)
      * При вводе неверного кода подтверждения -> (GET-запрос к сервису(интеграция)) -> ERROR message(Введён неверный код подтверждения)
      * Если истекло время кода подтверждения -> (GET-запрос к сервису(интеграция)) -> ERROR message(Время действия кода истекло)
        * GET-запрос на запрос нового кода
      * Проверка количества запросов на отправку кода с определённого профиля -> (GET-запрос к middleware) -> ERROR message(Превышено количество попыток, попробуйте позже)
  * Вывод формы смена пароля:
    * POST-запрос к базе данных
    * Valid:
      * Проверка текущего пароля(привязанного к этому профилю) -> редирект на страницу безопасности
    * Invalid: message -> ERROR(filed)
      * Проверка текущего пароля(привязанного к этому профилю) -> (GET-запрос) -> ERROR message(Введён неверный пароль)
      * При несовпадении паролей -> (JS проверка на странице) -> ERROR message(Введённые пароли не совпадают)
* База данных
  * ID
  * Login
  * Password
  * E-Mail
  * Number phone

"Страница сброса пароля"
* Форма 1:
  * Поле: E-Mail
  * Поле: Номер телефона
  * Поле: Новый пароль(по умолчанию - не отображается) -> показывает после подтверждения SMS
  * Поле: Подтвердить новый пароль (по умолчанию - не отображается) -> показывает после подтверждения SMS
* Структура
  * Подключение шаблона
    * Текущий шаблон
    * Переход на страницу(регистрации)
    * Переход на страницу(авторизации)
  * Вывод формы:
    * Подтверждения смены пароля через E-Mail
      * POST-запрос к базе данных 
        * Valid:
          * Генерация код(временный) -> (GET-запрос через middleware)
          * Отправка ссылки с уникальным кодом через SMTP
          * Редирект на страницу авторизации
        * Invalid: message -> ERROR(filed)
          * При вводе не привязанного E-Mail к существующему пользователю -> (GET-запрос) -> ERROR message(Пользователь с таким E-mail не найден)
          * При вводе неверного кода подтверждения -> (GET-запрос к middleware) -> ERROR message(Введён неверный код подтверждения)
          * При несовпадении паролей -> (JS проверка на странице) -> ERROR message(Введённые пароли не совпадают)
          * Если истекло время токена -> (GET-запрос к middleware) -> ERROR message(Время действия кода истекло)
            * GET-запрос на запрос нового кода
    * Подтверждения смены пароля через SMS:
      * POST-запрос к базе данных
        * Valid:
          * Проверка номера телефона(привязанного к существующему профилю)
          * GET-запрос на генерацию кода(интеграция)
          * Отправка SMS-кода через сервис(интеграция)
          * Редирект на страницу авторизации
        * Invalid: message -> ERROR(filed)
          * При вводе не привязанного телефона к существующему пользователю -> (GET-запрос) -> ERROR message(Пользователь с таким номером телефона не найден)
          * При вводе неверного кода подтверждения -> (GET-запрос к сервису(интеграция)) -> ERROR message(Введён неверный код подтверждения)
          * При несовпадении паролей -> (JS проверка на странице) -> ERROR message(Введённые пароли не совпадают)
          * Если истекло время кода подтверждения -> (GET-запрос к сервису(интеграция)) -> ERROR message(Время действия кода истекло)
            * GET-запрос на запрос нового кода
          * Проверка количества запросов на отправку кода с определённого профиля -> (GET-запрос к middleware) -> ERROR message(Превышено количество попыток, попробуйте позже)
* База данных
  * ID
  * E-Mail
  * Number phone
